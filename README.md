## 🎵 멜로니어리 (Meloniary)

**일기 기반 개인 맞춤 음악 추천 시스템**

---

## 📌 PROJECT

**멜로니어리 (Melon + Diary)** 프로젝트는 사용자가 작성한 **‘오늘의 일기’ 텍스트를 분석**하여, 사용자의 **현재 감성 및 분위기에 가장 어울리는 음악**을 추천하는 **인공지능 기반 개인화 음악 추천 시스템**.

단순한 장르 기반 추천을 넘어, **Word Embedding**과 **GPT 기반 태깅 기술**을 활용하여 개인의 심리 상태에 최적화된 음악 경험 제공.

---

## 💾 DATA

데이터는 **멜론(Melon)** 음원 플랫폼에서 크롤링한 데이터를 기반으로 구성.

| 데이터 종류 | 설명 |
|--------------|------|
| **인기 차트** | 실시간 대중적인 선호도를 반영한 곡 데이터 |
| **장르 음악** | 다양한 장르별 특징과 분포를 포함한 곡 데이터 |
| **멜론 DJ 플레이리스트** | 특정 테마나 분위기별로 큐레이션된 태그 정보를 풍부하게 제공하는 플레이리스트 데이터 |

---

## ✨ IDEA

> 🧩 **일기 태그 추출 → 벡터 공간 구축 → 하이브리드 필터링 → 최종 근접성 측정 (FAISS/NumPy 선택)**

  

**1️⃣ 일기 태그 추출 (Tagging)**

* **도구**: OpenAI API (`GPT-3.5-turbo`) 사용
* **기능**: 사용자의 일기 텍스트를 분석
    * **키워드 3개** 추출
    * **감정 3개** 추출
    * → 총 **6개의 핵심 태그(명사 형태)** 추출 

  

**2️⃣ 벡터 공간 구축 및 최적화 (Word Embedding)**

* **모델**: `FastText Korean Pretrained Model` 활용
* **유사 단어 풀 확장 및 노이즈 제거**: 기존 태그에 FastText 기반의 유사 단어를 추가하며, 이 과정에서 **코사인 유사도 기준치(Cosine Similarity Cutoff, 0.55)**를 적용해 **Semantic Drift**가 발생한 노이즈 단어를 사전에 필터링
* **감성 일관성 확보**: 실시간으로 생성된 일기 태그 벡터들에 대해 로컬 PCA를 적용하여 주성분 축(Main Semantic Axis)과 직교하는 방향의 벡터를 제거하는 방향 보정(Semantic Centroid Alignment, 0.95) 로직 적용
* **차원 축소:** PCA (Principal Component Analysis) 적용 → 노이즈 제거 및 계산 효율성 극대화


**3️⃣ 하이브리드 후보 곡 필터링 (Filtering)**

최종 추천의 정확도를 높이기 위해 2단계에 걸쳐 후보 곡 선별.

| 단계 | 목적 | 측정 방법 | 강점 |
|------|------|------------|------|
| **1차: 플레이리스트 유사도** | 일기 태그와 테마 방향성이 유사한 Top N 플레이리스트 선별 | Cosine Similarity | 벡터의 크기에 독립적으로 순수한 방향(테마) 일치 여부 판단 |
| **2차: 사용자 취향 반영** | 장르, 대중성(Top 75%), 최신곡 선호도를 반영하여 후보군 개인화 | 조건문 기반 데이터 필터링 | 개인의 명확한 취향을 반영한 곡을 후보군에 보강 |

   
**4️⃣ 최종 근접성 측정 및 추천 (Final Recommendation)**

**목표:** 필터링된 후보 곡 중 일기 태그의 의미적 위치에 가장 가까운 곡 탐색.
PCA를 거치지 않은 300차원의 Word2Vec 공간에서 유클리드 거리를 측정하여, 두 벡터 간의 절대적인 의미적 근접성을 기준으로 가장 확실한 **Nearest Neighbor Top 10 곡** 추천.

| 버전 | 측정 방법 | 특징 |
|------|------------|------|
| **NumPy (Brute-force)** | Euclidean Distance | **NumPy**를 사용하여 곡 벡터와 일기 태그 벡터 간의 **유클리드 거리**를 직접 계산하고 정렬 |
| **FAISS (IndexHNSWFlat)** | Euclidean Distance | **FAISS (Facebook AI Similarity Search)** 라이브러리의 **`IndexHNSWFlat`**를 사용하여 대규모 벡터 검색 환경에서 **고속 유클리드 거리 기반 Top K 검색** 수행 |

---

## 🧾 요약

| 단계 | 주요 기술 | 목적 |
|------|-------------|------|
| ① 태그 추출 | GPT-3.5-turbo | 일기에서 핵심 감정 및 키워드 추출 |
| ② 벡터화/정제 | FastText, PCA, Cosine Cutoff, PCA Alignment | 의미 공간 구축 및 감성 일관성 유지 |
| ③ 필터링 | Cosine Similarity, 조건 필터 | 테마 및 취향 기반 후보군 정제 |
| ④ 추천 | Euclidean Distance, **FAISS / NumPy** | 최종 근접성 기반 개인 맞춤 추천 및 **검색 속도 최적화** |
